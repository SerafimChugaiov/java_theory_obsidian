---
tags: Java/–ò—Å–∫–ª—é—á–µ–Ω–∏—è
---
> **–¶–µ–ª—å** ‚Äî —Å–¥–µ–ª–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω—É—é, –±–µ–∑–æ–ø–∞—Å–Ω—É—é –∏ —Ä–∞—Å—à–∏—Ä—è–µ–º—É—é —Å–∏—Å—Ç–µ–º—É –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –≤ REST API.  
> –í—Å—ë —ç—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ –∞–∫—Ç–∏–≤–Ω–æ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –≤ –±–æ–µ–≤–æ–º –ø—Ä–æ–µ–∫—Ç–µ ‚Äî API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–∑—é–º–µ (CV Management System).
## 1. –ü–æ—á–µ–º—É –º—ã –≤–Ω–µ–¥—Ä–∏–ª–∏ –∫–∞—Å—Ç–æ–º–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ

–í –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ REST API –º—ã —Å—Ç–æ–ª–∫–Ω—É–ª–∏—Å—å —Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏:

- –ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –æ—à–∏–±–æ–∫ –≤–æ–∑–≤—Ä–∞—â–∞–ª–∏—Å—å **—Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –æ—Ç–≤–µ—Ç–∞** (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏—è).
    
- **HTTP-—Å—Ç–∞—Ç—É—Å—ã –Ω–µ –≤—Å–µ–≥–¥–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ —Å—É—Ç–∏ –æ—à–∏–±–∫–∏** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `500` –≤–º–µ—Å—Ç–æ `404`, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω).
    
- –ù–∞ –∫–ª–∏–µ–Ω—Ç —É–ª–µ—Ç–∞–ª–∏ **—Å—Ç–µ–∫-—Ç—Ä–µ–π—Å—ã –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –¥–µ—Ç–∞–ª–∏**, —á—Ç–æ –ø–ª–æ—Ö–æ —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.
    
- –û—Ç–ª–∞–¥–∫–∞ –ø–æ –ª–æ–≥–∞–º –±—ã–ª–∞ —Å–ª–æ–∂–Ω–æ–π, –ø–æ—Ç–æ–º—É —á—Ç–æ **–æ—à–∏–±–∫–∏ –Ω–µ –ª–æ–≥–∏—Ä–æ–≤–∞–ª–∏—Å—å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ**.
    

### –†–µ—à–µ–Ω–∏–µ:

–ú—ã —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–ª–∏ **–µ–¥–∏–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫**, –∫–æ—Ç–æ—Ä—ã–π –≤–∫–ª—é—á–∞–µ—Ç:

- —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è (–≤—Å–µ –Ω–∞—Å–ª–µ–¥—É—é—Ç—Å—è –æ—Ç –æ–±—â–µ–≥–æ –∫–ª–∞—Å—Å–∞),
    
- DTO-–æ—Ç–≤–µ—Ç —Å –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π,
    
- –≥–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫,
    
- —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ.
## 2. –°–æ–∑–¥–∞—ë–º –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –∏—Å–∫–ª—é—á–µ–Ω–∏–π `BaseException`

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**

```java
@Getter
public abstract class BaseException extends RuntimeException {

    private final int statusCode;
    private final String errorCode;

    public BaseException(int statusCode, String message) {
        this(statusCode, null, message, null);
    }

    public BaseException(int statusCode, String errorCode, String message) {
        this(statusCode, errorCode, message, null);
    }

    public BaseException(int statusCode, String message, Throwable cause) {
        this(statusCode, null, message, cause);
    }

    public BaseException(int statusCode, String errorCode, String message, Throwable cause) {
        super(message, cause);
        this.statusCode = statusCode;
        this.errorCode = errorCode;
    }
}

```
### –ó–∞—á–µ–º –º—ã —Å–¥–µ–ª–∞–ª–∏ –∏–º–µ–Ω–Ω–æ —Ç–∞–∫:

- **–ù–∞—Å–ª–µ–¥—É–µ–º—Å—è –æ—Ç `RuntimeException`**, —á—Ç–æ–±—ã –∏—Å–∫–ª—é—á–µ–Ω–∏—è –Ω–µ –Ω—É–∂–Ω–æ –±—ã–ª–æ —è–≤–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤–µ–∑–¥–µ (`unchecked`).
    
- –ò—Å–ø–æ–ª—å–∑—É–µ–º `int statusCode`, —á—Ç–æ–±—ã –Ω–µ —Ç—è–Ω—É—Ç—å `HttpStatus` –≤–µ–∑–¥–µ –≤ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É.
    
- `errorCode` ‚Äî –∫–æ—Ä–æ—Ç–∫–∏–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –æ—à–∏–±–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `"cv.not_found"`, `"auth.failed"`), –∫–æ—Ç–æ—Ä—ã–π:
    
    - –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è,
        
    - –ø–æ–º–æ–≥–∞–µ—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É –æ—Ç–ª–∏—á–∞—Ç—å –æ—à–∏–±–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ,
        
    - –ª–µ–≥–∫–æ –ª–æ–∫–∞–ª–∏–∑—É–µ—Ç—Å—è.
        
- –ù–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–≤ —É–ø—Ä–æ—â–∞—é—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –≤ —Ä–∞–∑–Ω—ã—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å `Throwable`).
## 3. –°–æ–∑–¥–∞—ë–º –µ–¥–∏–Ω—ã–π –æ—Ç–≤–µ—Ç –æ–± –æ—à–∏–±–∫–µ `BaseErrorResponse`

**–ì–¥–µ:**  
–í –ø–∞–∫–µ—Ç–µ `dto.response.error` –∏–ª–∏ `common.dto`.

```java
@Builder
@Getter
@AllArgsConstructor
public class BaseErrorResponse {
    private String errorCode;  
	private String message;
}
```

### –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:
–í –≥–ª–æ–±–∞–ª—å–Ω–æ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ –æ—à–∏–±–æ–∫ –º—ã —Ñ–æ—Ä–º–∏—Ä—É–µ–º —ç—Ç–æ—Ç –æ–±—ä–µ–∫—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –µ–≥–æ –∫–ª–∏–µ–Ω—Ç—É.  
–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç **—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É –≤—Å–µ–≥–¥–∞ –ø–æ–ª—É—á–∞—Ç—å –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —Ñ–æ—Ä–º–∞—Ç**, –∏ –æ–Ω –∑–Ω–∞–µ—Ç, —á—Ç–æ –≤—Å–µ–≥–¥–∞ –º–æ–∂–µ—Ç –≤–∑—è—Ç—å:

- `errorCode` ‚Äî –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏;
- `message` ‚Äî –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é;
### –ü–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ —Ç–∞–∫–æ–π —Ñ–æ—Ä–º–∞—Ç:
- –ú–∏–Ω–∏–º–∞–ª–∏–∑–º: `errorCode` –∏ `message` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–µ, —á—Ç–æ –Ω—É–∂–Ω–æ —Ñ—Ä–æ–Ω—Ç—É.
    
- –ö–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –ø–æ `errorCode` –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–ª–∏ –ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, `session.expired` ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –ª–æ–≥–∏–Ω).
    
- –°—Ç—Ä–æ–∏—Ç—Å—è —á–µ—Ä–µ–∑ `@Builder`, —á—Ç–æ —É–¥–æ–±–Ω–æ –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ —á–µ—Ä–µ–∑ `ResponseEntity`.
## 4. –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è (–ø—Ä–∏–º–µ—Ä—ã –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞)

### –ü—Ä–∏–º–µ—Ä 1: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω

**–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** –≤ —Å–µ—Ä–≤–∏—Å–µ, –∫–æ–≥–¥–∞ –∏—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID –∏ –Ω–µ –Ω–∞—Ö–æ–¥–∏–º.

```java
public class UserNotFoundException extends BaseException {
    public UserNotFoundException(Long id) {
        super(HttpStatus.NOT_FOUND, "USER_NOT_FOUND", "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å ID=" + id + " –Ω–µ –Ω–∞–π–¥–µ–Ω");
    }
}
```

**–ì–¥–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è:**

```java
public User getUserById(Long id) {
    return userRepository.findById(id)
        .orElseThrow(() -> new UserNotFoundException(id));
}
```

### –ü—Ä–∏–º–µ—Ä 2: –¥—É–±–ª–∏—Ä—É—é—â–∏–π –Ω–∞–≤—ã–∫ (skill)

**–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –Ω–∞–≤—ã–∫–∞ –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

```java
public class SkillAlreadyExistsException extends BaseException {
    public SkillAlreadyExistsException(String skillName) {
        super(HttpStatus.CONFLICT, "SKILL_DUPLICATE", "–ù–∞–≤—ã–∫ '" + skillName + "' —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω");
    }
}
```

**–ö–∞–∫ –ø–æ–º–æ–≥–∞–µ—Ç:**

- –£–ø—Ä–æ—â–∞–µ—Ç —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏.
    
- –ò—Å–∫–ª—é—á–µ–Ω–∏—è –Ω–µ—Å—É—Ç —Å–º—ã—Å–ª–æ–≤—É—é –Ω–∞–≥—Ä—É–∑–∫—É –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–∞–∫ **–∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–π –º–µ—Ö–∞–Ω–∏–∑–º —Å–∏–≥–Ω–∞–ª—å–Ω—ã—Ö –æ—à–∏–±–æ–∫**, –∞ –Ω–µ –∫–∞–∫ —Å–±–æ–∏.
---
## –ß—Ç–æ –º—ã –¥–æ—Å—Ç–∏–≥–ª–∏ –Ω–∞ —ç—Ç–∏—Ö —ç—Ç–∞–ø–∞—Ö

- –°–∏—Å—Ç–µ–º–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π —Å—Ç–∞–ª–∞ **–ø—Ä–æ–∑—Ä–∞—á–Ω–æ–π –∏ —Ä–∞—Å—à–∏—Ä—è–µ–º–æ–π**  
* –í—Å–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è **–∏–º–µ—é—Ç –∫–æ–¥ –∏ —Å—Ç–∞—Ç—É—Å**, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ –∏ –≤ –ª–æ–≥–∞—Ö  
- –ö–∞–∂–¥—ã–π –±–∏–∑–Ω–µ—Å-–∫–µ–π—Å —Ç–µ–ø–µ—Ä—å –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Å–≤–æ—é —É–Ω–∏–∫–∞–ª—å–Ω—É—é –æ—à–∏–±–∫—É –±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ª–æ–≥–∏–∫–∏  

---
## 5. –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–±–ª–µ–º–∞:
–î–∞–∂–µ –ø–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∏—Å–∫–ª—é—á–µ–Ω–∏–π –æ—Å—Ç–∞–≤–∞–ª–∏—Å—å –ø—Ä–æ–±–ª–µ–º—ã:

- –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—á–∞—è—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–∞–ª–∏–¥–∞—Ü–∏—è, –æ—à–∏–±–∫–∏ Spring Security) –≤—ã–ª–µ—Ç–∞–ª–∏ **–Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è**, –Ω–∞—Ä—É—à–∞—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ –æ—Ç–≤–µ—Ç–∞.
- –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª **–µ–¥–∏–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫**, –æ—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω—ã—Ö –¥–ª—è –∞—É–¥–∏—Ç–∞: –∫—Ç–æ –≤—ã–∑–≤–∞–ª, –∫–æ–≥–¥–∞, —á—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫.
- –ü—Ä–∏—à–ª–æ—Å—å –±—ã –≤—Ä—É—á–Ω—É—é –ø–∏—Å–∞—Ç—å `try-catch` –≤ –∫–∞–∂–¥–æ–º –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ.
### –†–µ—à–µ–Ω–∏–µ:
–ú—ã –¥–æ–±–∞–≤–∏–ª–∏ **–≥–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫**, –∫–æ—Ç–æ—Ä—ã–π:

- –ª–æ–≤–∏—Ç **–≤—Å–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è** (`BaseException`, `Validation`, `Security`, `Generic`),
- –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç **–µ–¥–∏–Ω—ã–π DTO-–æ—Ç–≤–µ—Ç `BaseErrorResponse`**,
- –¥–µ–ª–∞–µ—Ç **—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –æ—à–∏–±–∫–∏ –≤ –æ—á–µ—Ä–µ–¥—å `requestLogQueue` (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ),
- —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –≤ –ª–æ–≥–∞—Ö: IP, URL, –º–µ—Ç–æ–¥, —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Å—Ç–µ–∫-—Ç—Ä–µ–π—Å.

## 6. –ì–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `ExceptionControllerHandler`

**–ì–¥–µ:**  
–í –ø–∞–∫–µ—Ç–µ `handler`, –∞–Ω–Ω–æ—Ç–∏—Ä–æ–≤–∞–Ω `@RestControllerAdvice`.

### –ì–ª–∞–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏:

- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤—Å–µ —Ç–∏–ø—ã –æ—à–∏–±–æ–∫ ‚Äî –∏ –±–∏–∑–Ω–µ—Å–æ–≤—ã–µ, –∏ —Å–∏—Å—Ç–µ–º–Ω—ã–µ.
- –í–æ–∑–≤—Ä–∞—â–∞—Ç—å –µ–¥–∏–Ω—ã–π –æ—Ç–≤–µ—Ç —Å `errorCode`, `message`, `status`.
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ ‚Äî **—Å–æ–±–∏—Ä–∞–µ–º –≤—Å—ë –≤ –æ—á–µ—Ä–µ–¥—å –ª–æ–≥–æ–≤**.
### –ü—Ä–∏–º–µ—Ä—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:

#### üü• `BaseException` ‚Äî –Ω–∞—à–∏ –±–∏–∑–Ω–µ—Å-–∏—Å–∫–ª—é—á–µ–Ω–∏—è

```java
@ExceptionHandler(BaseException.class)
public ResponseEntity<BaseErrorResponse> handleBaseException(BaseException ex, HttpServletRequest request) {
    // –õ–æ–≥–≥–∏—Ä—É–µ–º –æ—à–∏–±–∫—É –∏ –∫–ª–∞–¥—ë–º –≤ –æ—á–µ—Ä–µ–¥—å
    logToQueue(request, ex, ex.getStatusCode());

    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –æ—Ç–≤–µ—Ç –∫–ª–∏–µ–Ω—Ç—É
    BaseErrorResponse response = new BaseErrorResponse(
        ex.getErrorCode(), 
        ex.getMessage()
    );
    return ResponseEntity
        .status(HttpStatus.valueOf(ex.getStatusCode()))
        .body(response);
}
```

#### üüß `MethodArgumentNotValidException` ‚Äî –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

```java
@ExceptionHandler(MethodArgumentNotValidException.class)
public ResponseEntity<BaseErrorResponse> handleValidationExceptions(MethodArgumentNotValidException ex, HttpServletRequest request) {
    List<String> errorMessages = ex.getBindingResult()
        .getAllErrors()
        .stream()
        .map(ObjectError::getDefaultMessage)
        .collect(Collectors.toList());

    String combinedMessage = String.join("; ", errorMessages);

    logToQueue(request, ex, 400);

    return ResponseEntity
        .status(HttpStatus.BAD_REQUEST)
        .body(new BaseErrorResponse("validation.failed", combinedMessage));
}
```

#### üü® `Exception` ‚Äî –≤—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ (–ø–∞–¥–µ–Ω–∏—è, NullPointer –∏ —Ç.–¥.)

```java
@ExceptionHandler(Exception.class)
public ResponseEntity<BaseErrorResponse> handleUnexpectedException(Exception ex, HttpServletRequest request) {
    logToQueue(request, ex, 500);

    return ResponseEntity
        .status(HttpStatus.INTERNAL_SERVER_ERROR)
        .body(new BaseErrorResponse("error.server", "Server error occurred."));
}
```

---

## 7. –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –æ—á–µ—Ä–µ–¥—å

### –ó–∞—á–µ–º:

- –í—Å–µ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è **–≤ –µ–¥–∏–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ** ‚Äî –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏ –ø–æ –ø—Ä–æ–µ–∫—Ç—É.
    
- –ú–æ–∂–Ω–æ –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –æ—Ç—Å–ª–µ–¥–∏—Ç—å: –∫—Ç–æ –≤—ã–∑–≤–∞–ª, –∫–æ–≥–¥–∞, —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ, –∫–∞–∫–æ–π IP, –±—Ä–∞—É–∑–µ—Ä.
    
- –õ–æ–≥–∏ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –æ—á–µ—Ä–µ–¥—å `requestLogQueue` ‚Üí –º–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ –ë–î, Kafka, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥.
    

### –ü—Ä–∏–º–µ—Ä –ª–æ–≥-–∑–∞–ø–∏—Å–∏:

```java
PortalsUserRequestLog.builder()
    .createdAt(dateTimeUtil.getCurrentLocalDateTime())
    .ipAddress(request.getRemoteAddr())
    .method(request.getMethod())
    .url(request.getRequestURI())
    .userAgent(request.getHeader("User-Agent"))
    .logContext(LogContext.EXCEPTION_HANDLER)
    .userId(currentUser != null ? currentUser.getId() : null)
    .email(currentUser != null ? currentUser.getEmail() : null)
    .responseStatus(statusCode)
    .errorStackTrace(getStackTraceAsString(ex))
    .build();
```

---

## 8. –ß—Ç–æ –º—ã –¥–æ—Å—Ç–∏–≥–ª–∏

- –û—à–∏–±–∫–∏ **–Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è**, –∞ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –¥–µ—Ç–∞–ª—å–Ω–æ.
    
- **–§—Ä–æ–Ω—Ç –≤—Å–µ–≥–¥–∞ –ø–æ–ª—É—á–∞–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç** –æ—à–∏–±–∫–∏: –º–æ–∂–Ω–æ –ø—Ä–µ–¥—Å–∫–∞–∑–∞—Ç—å –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å.
    
- –ü–æ–≤–µ–¥–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –≤ —Å–ª—É—á–∞–µ –æ—à–∏–±–æ–∫ **–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ –∏ —Ä–∞—Å—à–∏—Ä—è–µ–º–æ**.
    
- –ú—ã –ø–æ–ª—É—á–∏–ª–∏ **–µ–¥–∏–Ω–æ–µ –º–µ—Å—Ç–æ**, –≥–¥–µ –º–æ–∂–Ω–æ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ:
    
    - –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏,
        
    - –∏–∑–º–µ–Ω—è—Ç—å —Ñ–æ—Ä–º–∞—Ç,
        
    - –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ç–∏–ø—ã –∏—Å–∫–ª—é—á–µ–Ω–∏–π.
        

---

## –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –≤ –±—É–¥—É—â–µ–º:

- –î–æ–±–∞–≤–∏—Ç—å `traceId` –∏–ª–∏ `requestId` –≤ –æ—Ç–≤–µ—Ç –∏ –ª–æ–≥ ‚Äî –¥–ª—è –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ –≤ –ª–æ–≥–∞—Ö.
    
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å APM (–Ω–∞–ø—Ä–∏–º–µ—Ä, Sentry, Elastic).
    
- –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –æ—à–∏–±–æ–∫ –ø–æ `errorCode`.
    

---

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, —è –º–æ–≥—É –ø–æ–º–æ—á—å –æ—Ñ–æ—Ä–º–∏—Ç—å —ç—Ç–æ –∫–∞–∫ Markdown-–¥–æ–∫—É–º–µ–Ω—Ç –¥–ª—è Wiki, –∏–ª–∏ —Å–¥–µ–ª–∞—Ç—å –¥–∏–∞–≥—Ä–∞–º–º—É –ø–æ —ç—Ç–æ–º—É –º–µ—Ö–∞–Ω–∏–∑–º—É ‚Äî –ø—Ä–æ—Å—Ç–æ —Å–∫–∞–∂–∏.